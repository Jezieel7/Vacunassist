{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore, doc, setDoc } from '@firebase/firestore'; // TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBHFWuuXgq4KZFuuYkMDjszxzLPk7Oc6tk\",\n  authDomain: \"vacunassist-97fc7.firebaseapp.com\",\n  projectId: \"vacunassist-97fc7\",\n  storageBucket: \"vacunassist-97fc7.appspot.com\",\n  messagingSenderId: \"1085275692040\",\n  appId: \"1:1085275692040:web:5dcd7341d8f13346cbc5bd\"\n}; // Initialize Firebase\n\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\nfunction calculoDeEdad(BirthDate) {\n  let hoy = new Date();\n  console.log(hoy);\n  let cumpleanios = new Date(BirthDate);\n  console.log(BirthDate);\n  let edad = hoy.getFullYear() - cumpleanios.getFullYear();\n  let m = hoy.getMonth() - cumpleanios.getMonth();\n\n  if (m < 0 || m == 0 && hoy.getDate() < cumpleanios.getDate()) {\n    //aca no seria m==0 en vez de m===0 ???\n    edad--;\n  }\n\n  console.log(edad);\n  return edad;\n}\n\nfunction calculoGripe(vaccinationDateFlu) {\n  //esta funcion es igual a la de calculo de edad pero weno\n  let hoy = new Date();\n  let ultimaVacGripe = new Date(vaccinationDateFlu);\n  let años = hoy.getFullYear() - ultimaVacGripe.getFullYear();\n  let m = hoy.getMonth() - ultimaVacGripe.getMonth();\n\n  if (m < 0 || m == 0 && hoy.getDate() < ultimaVacGripe.getDate()) {\n    //aca no seria m==0 en vez de m===0 ???\n    años--;\n  }\n\n  return años;\n}\n\nexport const createUserDocument = async user => {\n  if (!user) return; //esto por si meten huevadas, igual no se si funciona, no lo probe\n  //crear referencia al documento (uso email para identificar a los panas)\n\n  const userRef = doc(db, `Persona/${user.email}`);\n  let numero = Math.floor(Math.random() * 10000);\n\n  while (numero < 1000 || numero > 10000) {\n    numero = Math.floor(Math.random() * 10000);\n  }\n\n  user.key = numero;\n  let hoy = new Date(); //VACUNA COVID \n\n  if (calculoDeEdad(user.birthDate) > 60) {\n    if (user.doseAmountCovid < 2) {\n      //AUTOMATICO, DE RIESGO = MAYOR DE 60, CON MENOS DE 2 DOSIS, LE ASIGNO EN 3 DIAS\n      hoy;\n      user.turnCovid = `Tiene turno el día ${hoy.setDate(hoy.getDate() + 3)} a las 12:00 horas, en el vacunatorio ${user.zone}`;\n    }\n  } else {\n    if (user.riskFactor == \"true\") {\n      if (user.doseAmountCovid < 2) {\n        //AUTOMATICO, DE RIESGO = MENOR DE 60, PERO CON FACTORES DE RIESGO Y MENOS DE 2 DOSIS, LE ASIGNO EN 4 DIAS\n        user.turnCovid = `Tiene turno el día ${hoy.setDate(hoy.getDate() + 4)} a las 12:30 horas, en el vacunatorio ${user.zone}`;\n      }\n    } else {\n      if (user.doseAmountCovid < 2) {\n        //MANUAL, NO ES DE RIESGO = MENOR DE 60, MENOS DE 2 DOSIS\n        user.turnCovid = \"Se le notifico a los administradores su solicitud de turno para la vacuna del COVID-19\";\n      }\n    }\n  } //VACUNA GRIPE\n\n\n  if (calculoDeEdad(user.birthDate) > 60) {\n    if (user.hasVaccineFlu == \"false\") {\n      // +60 AÑOS, SIN VACUNA\n      user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 1)} a las 14:00 horas, en el vacunatorio ${user.zone}`; //LE DOY TURNO PARA 1 MES, EN VACUNATORIO DE PREFERENCIA \n    } else {\n      if (calculoGripe(user.vaccinationDateFlu)) {\n        //+60 AÑOS, CON VACUNA VENCIDA\n        user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 1)} a las 14:30 horas, en el vacunatorio ${user.zone}`;\n      }\n    }\n  } else {\n    if (user.hasVaccineFlu == \"false\") {\n      //-60 AÑOS, SIN VACUNA\n      user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 5)} a las 13:00 horas, en el vacunatorio ${user.zone}`; //LE DOY TURNO PARA 5 MESES, EN VACUNATORIO DE PREFERENCIA. \n    } else {\n      if (calculoGripe(user.vaccinationDateFlu)) {\n        //-60 AÑOS, CON VACUNA VENCIDA\n        user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 5)} a las 13:30 horas, en el vacunatorio ${user.zone}`;\n      }\n    }\n  } // SI ALGUN DIA SE QUIERE HACER MAS \"PRO\" EL TEMA DE TURNOS, UNA BUENA IDEA PODRÍA SER TENER UN CALENDARIO, CON UN LIMITE DE TURNOS POR DIA, Y TENER CADA 30 MINUTOS (PONELE) UN TURNO\n  // crea el documento del user que se esta registrando\n\n\n  await setDoc(userRef, {\n    user\n  });\n}; //MATI ESTUVO POR ACÁ","map":{"version":3,"names":["initializeApp","getAuth","getFirestore","doc","setDoc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","calculoDeEdad","BirthDate","hoy","Date","console","log","cumpleanios","edad","getFullYear","m","getMonth","getDate","calculoGripe","vaccinationDateFlu","ultimaVacGripe","años","createUserDocument","user","userRef","email","numero","Math","floor","random","key","birthDate","doseAmountCovid","turnCovid","setDate","zone","riskFactor","hasVaccineFlu","turnFlu","setMonth"],"sources":["C:/Users/PC/Desktop/programación/VacunAssistIS2/Vacunassist/src/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport {getAuth} from 'firebase/auth';\r\nimport { getFirestore, doc, setDoc } from '@firebase/firestore'\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBHFWuuXgq4KZFuuYkMDjszxzLPk7Oc6tk\",\r\n  authDomain: \"vacunassist-97fc7.firebaseapp.com\",\r\n  projectId: \"vacunassist-97fc7\",\r\n  storageBucket: \"vacunassist-97fc7.appspot.com\",\r\n  messagingSenderId: \"1085275692040\",\r\n  appId: \"1:1085275692040:web:5dcd7341d8f13346cbc5bd\"\r\n};\r\n// Initialize Firebase\r\nexport const app = initializeApp(firebaseConfig);\r\nexport const auth = getAuth(app)\r\nexport const db= getFirestore(app)\r\n\r\nfunction calculoDeEdad(BirthDate) {\r\n  let hoy = new Date();\r\n  console.log(hoy)\r\n  let cumpleanios = new Date(BirthDate);\r\n  console.log(BirthDate)\r\n  let edad = hoy.getFullYear() - cumpleanios.getFullYear();\r\n  let m = hoy.getMonth() - cumpleanios.getMonth();\r\n  if (m < 0 || (m == 0 && hoy.getDate() < cumpleanios.getDate())) { //aca no seria m==0 en vez de m===0 ???\r\n      edad--;\r\n  }\r\n  console.log(edad);\r\n  return edad;\r\n}\r\nfunction calculoGripe(vaccinationDateFlu){ //esta funcion es igual a la de calculo de edad pero weno\r\n  let hoy = new Date()\r\n  let ultimaVacGripe = new Date(vaccinationDateFlu)\r\n  let años= hoy.getFullYear() - ultimaVacGripe.getFullYear();\r\n  let m = hoy.getMonth() - ultimaVacGripe.getMonth();\r\n  if (m < 0 || (m == 0 && hoy.getDate() < ultimaVacGripe.getDate())) { //aca no seria m==0 en vez de m===0 ???\r\n      años--;\r\n  }\r\n  return años;\r\n}\r\n\r\n\r\nexport const createUserDocument = async (user) =>{\r\n  if(!user) return; //esto por si meten huevadas, igual no se si funciona, no lo probe\r\n  //crear referencia al documento (uso email para identificar a los panas)\r\n  const userRef = doc(db,`Persona/${user.email}`)\r\n  let numero= Math.floor(Math.random()*10000);\r\n  while(numero < 1000 || numero > 10000){\r\n    numero= Math.floor(Math.random()*10000);\r\n  }\r\n  user.key= numero \r\n  let hoy = new Date();\r\n  //VACUNA COVID \r\n  if((calculoDeEdad(user.birthDate) > 60)){ \r\n    if((user.doseAmountCovid < 2)){ \r\n       //AUTOMATICO, DE RIESGO = MAYOR DE 60, CON MENOS DE 2 DOSIS, LE ASIGNO EN 3 DIAS\r\n      hoy \r\n      user.turnCovid = `Tiene turno el día ${hoy.setDate(hoy.getDate() + 3)} a las 12:00 horas, en el vacunatorio ${user.zone}`\r\n    } \r\n  }else{ \r\n    if(user.riskFactor == \"true\"){\r\n      if(user.doseAmountCovid < 2){\r\n        //AUTOMATICO, DE RIESGO = MENOR DE 60, PERO CON FACTORES DE RIESGO Y MENOS DE 2 DOSIS, LE ASIGNO EN 4 DIAS\r\n        user.turnCovid = `Tiene turno el día ${hoy.setDate(hoy.getDate() + 4)} a las 12:30 horas, en el vacunatorio ${user.zone}`\r\n      }  \r\n    }else{\r\n      if(user.doseAmountCovid < 2){\r\n        //MANUAL, NO ES DE RIESGO = MENOR DE 60, MENOS DE 2 DOSIS\r\n        user.turnCovid = \"Se le notifico a los administradores su solicitud de turno para la vacuna del COVID-19\"\r\n      }\r\n    }\r\n  }   \r\n  //VACUNA GRIPE\r\n  if((calculoDeEdad(user.birthDate) > 60)){\r\n    if(user.hasVaccineFlu == \"false\"){ // +60 AÑOS, SIN VACUNA\r\n      user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 1)} a las 14:00 horas, en el vacunatorio ${user.zone}`\r\n      //LE DOY TURNO PARA 1 MES, EN VACUNATORIO DE PREFERENCIA \r\n    }else{\r\n      if(calculoGripe(user.vaccinationDateFlu)){ //+60 AÑOS, CON VACUNA VENCIDA\r\n        user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 1)} a las 14:30 horas, en el vacunatorio ${user.zone}`\r\n      }\r\n    }\r\n  }else{ \r\n    if(user.hasVaccineFlu == \"false\"){ //-60 AÑOS, SIN VACUNA\r\n      user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 5)} a las 13:00 horas, en el vacunatorio ${user.zone}`\r\n      //LE DOY TURNO PARA 5 MESES, EN VACUNATORIO DE PREFERENCIA. \r\n    }else{\r\n      if(calculoGripe(user.vaccinationDateFlu)){ //-60 AÑOS, CON VACUNA VENCIDA\r\n        user.turnFlu = `Tiene turno el día ${hoy.setMonth(hoy.getMonth() + 5)} a las 13:30 horas, en el vacunatorio ${user.zone}`\r\n      }\r\n    }\r\n  }\r\n  // SI ALGUN DIA SE QUIERE HACER MAS \"PRO\" EL TEMA DE TURNOS, UNA BUENA IDEA PODRÍA SER TENER UN CALENDARIO, CON UN LIMITE DE TURNOS POR DIA, Y TENER CADA 30 MINUTOS (PONELE) UN TURNO\r\n   // crea el documento del user que se esta registrando\r\n  await setDoc(userRef, {user});\r\n} //MATI ESTUVO POR ACÁ"],"mappings":"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"},"metadata":{},"sourceType":"module"}