{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\leand\\\\Desktop\\\\Proyectos\\\\Vacunassist\\\\src\\\\components\\\\Form.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Register from \"./Register\";\nimport Cargar from \"./Cargar\";\nimport { useNavigate } from 'react-router-dom';\nimport { createUserDocument, createUserData } from \"../firebase\";\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nimport { useAuth } from \"../context/AuthContext\";\nimport { Alert } from \"./Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MySwal = withReactContent(Swal);\n_c = MySwal;\nexport function Form() {\n  _s();\n\n  const [page, setPage] = useState(0);\n  const [user, setUser] = useState({\n    email: '',\n    password: '',\n    name: '',\n    birthDate: '',\n    LastName: '',\n    DNI: '',\n    key: '',\n    zone: '',\n    riskFactor: '',\n    doseAmountCovid: '',\n    hasVaccineFlu: '',\n    vaccinationDateFlu: '',\n    hasYellowFever: '',\n    doseYearYellowFever: ''\n  });\n  const FormTitles = [\"Registro\", \"Datos importantes\"];\n\n  const PageDisplay = () => {\n    if (page === 0) {\n      return /*#__PURE__*/_jsxDEV(Register, {\n        user: user,\n        setUser: setUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Cargar, {\n        user: user,\n        setUser: setUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  const {\n    signup\n  } = useAuth();\n  const [error, setError] = useState();\n  const navigate = useNavigate();\n\n  function calculoDeEdad(BirthDate) {\n    let hoy = new Date();\n    console.log(hoy);\n    let cumpleanios = new Date(BirthDate);\n    console.log(BirthDate);\n    let edad = hoy.getFullYear() - cumpleanios.getFullYear();\n    let m = hoy.getMonth() - cumpleanios.getMonth();\n\n    if (m < 0 || m === 0 && hoy.getDate() < cumpleanios.getDate()) {\n      edad--;\n    }\n\n    console.log(edad);\n    return edad;\n  }\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      await signup(user.email, user.password);\n      await createUserDocument(user);\n      MySwal.fire(`Tu codigo de validación es: ${user.key}, por favor, anotela`);\n\n      if (calculoDeEdad(user.BirthDate) > 60 && user.doseAmountCovid < 2 || user.riskFactor) {\n        MySwal.fire(\"Se le asigno un turno automaticamente\");\n      } else {\n        MySwal.fire(\"Se le notifico a los administradores su solicitud de turno\");\n      }\n\n      navigate('/');\n    } catch (error) {\n      if (error.code === \"auth/weak-password\") {\n        setError(\"Contrasenia debil, deberia tener al menos 6 caracteres\");\n      }\n\n      setError(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form\",\n    children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n      message: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: FormTitles[page]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"body\",\n          children: PageDisplay()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: page === 0,\n            onClick: () => {\n              setPage(currPage => currPage - 1);\n            },\n            children: \"Prev\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (page === FormTitles.length - 1) {\n                alert(\"FORM SUBMITTED\");\n                console.log(user);\n              } else {\n                setPage(currPage => currPage + 1);\n              }\n            },\n            children: page === FormTitles.length - 1 ? \"Submit\" : \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Form, \"15mJXbS/SwMSnQoVMBb08RAJtB4=\", false, function () {\n  return [useAuth, useNavigate];\n});\n\n_c2 = Form;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MySwal\");\n$RefreshReg$(_c2, \"Form\");","map":{"version":3,"names":["React","useState","Register","Cargar","useNavigate","createUserDocument","createUserData","Swal","withReactContent","useAuth","Alert","MySwal","Form","page","setPage","user","setUser","email","password","name","birthDate","LastName","DNI","key","zone","riskFactor","doseAmountCovid","hasVaccineFlu","vaccinationDateFlu","hasYellowFever","doseYearYellowFever","FormTitles","PageDisplay","signup","error","setError","navigate","calculoDeEdad","BirthDate","hoy","Date","console","log","cumpleanios","edad","getFullYear","m","getMonth","getDate","handleSubmit","e","preventDefault","fire","code","message","currPage","length","alert"],"sources":["C:/Users/leand/Desktop/Proyectos/Vacunassist/src/components/Form.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Register from \"./Register\";\r\nimport Cargar from \"./Cargar\";\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { createUserDocument, createUserData } from \"../firebase\";\r\nimport Swal from 'sweetalert2'\r\nimport withReactContent from 'sweetalert2-react-content'\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { Alert } from \"./Alert\";\r\n\r\nconst MySwal = withReactContent(Swal);\r\nexport function Form() {\r\n  const [page, setPage] = useState(0);\r\n  const [user, setUser] = useState({\r\n    email: '',\r\n    password: '',\r\n    name: '',\r\n    birthDate: '',\r\n    LastName: '',\r\n    DNI: '',\r\n    key: '',\r\n    zone: '',\r\n    riskFactor: '',\r\n    doseAmountCovid: '',\r\n    hasVaccineFlu: '',\r\n    vaccinationDateFlu: '',\r\n    hasYellowFever: '',\r\n    doseYearYellowFever: ''\r\n  });\r\n  const FormTitles = [\"Registro\", \"Datos importantes\"];\r\n  const PageDisplay = () => {\r\n    if (page === 0) {\r\n      return <Register user={user} setUser={setUser}/>;\r\n    } else {\r\n      return <Cargar user={user} setUser={setUser}/>;\r\n    }\r\n  };\r\n  const {signup}= useAuth();\r\n  const [error, setError] = useState();\r\n  const navigate = useNavigate()\r\n  function calculoDeEdad(BirthDate) {\r\n    let hoy = new Date();\r\n    console.log(hoy)\r\n    let cumpleanios = new Date(BirthDate);\r\n    console.log(BirthDate)\r\n    let edad = hoy.getFullYear() - cumpleanios.getFullYear();\r\n    let m = hoy.getMonth() - cumpleanios.getMonth();\r\n    if (m < 0 || (m === 0 && hoy.getDate() < cumpleanios.getDate())) {\r\n        edad--;\r\n    }\r\n    console.log(edad);\r\n    return edad;\r\n}\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n        await signup(user.email, user.password);\r\n        await createUserDocument(user)\r\n        MySwal.fire(`Tu codigo de validación es: ${user.key}, por favor, anotela`)\r\n        if(((calculoDeEdad(user.BirthDate) > 60) && (user.doseAmountCovid < 2)) || user.riskFactor){\r\n            MySwal.fire(\"Se le asigno un turno automaticamente\");\r\n        }else{\r\n            MySwal.fire(\"Se le notifico a los administradores su solicitud de turno\");\r\n        }\r\n        navigate('/')\r\n    } catch (error) {\r\n        if(error.code === \"auth/weak-password\"){\r\n            setError(\"Contrasenia debil, deberia tener al menos 6 caracteres\")\r\n        }\r\n        setError(error.message);\r\n    }\r\n};\r\n  return (\r\n    <div className=\"form\">\r\n        {error && <Alert message={error}/>}\r\n        <form onSubmit={handleSubmit}>\r\n           <div className=\"form-container\">\r\n           <div className=\"header\">\r\n             <h1>{FormTitles[page]}</h1>\r\n           </div>\r\n           <div className=\"body\">{PageDisplay()}</div>\r\n           <div className=\"footer\">\r\n             <button\r\n               disabled={page === 0}\r\n               onClick={() => {\r\n                 setPage((currPage) => currPage - 1);\r\n               }}\r\n             >\r\n               Prev\r\n             </button>\r\n             <button\r\n               onClick={() => {\r\n                 if (page === FormTitles.length - 1) {\r\n                   alert(\"FORM SUBMITTED\");\r\n                   console.log(user);\r\n                 } else {\r\n                   setPage((currPage) => currPage + 1);\r\n                 }\r\n               }}\r\n             >\r\n               {page === FormTitles.length - 1 ? \"Submit\" : \"Next\"}\r\n             </button>\r\n           </div>\r\n         </div>\r\n        </form>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}