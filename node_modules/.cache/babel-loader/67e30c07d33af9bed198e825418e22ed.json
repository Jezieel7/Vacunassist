{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore, doc, setDoc } from '@firebase/firestore'; // TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBHFWuuXgq4KZFuuYkMDjszxzLPk7Oc6tk\",\n  authDomain: \"vacunassist-97fc7.firebaseapp.com\",\n  projectId: \"vacunassist-97fc7\",\n  storageBucket: \"vacunassist-97fc7.appspot.com\",\n  messagingSenderId: \"1085275692040\",\n  appId: \"1:1085275692040:web:5dcd7341d8f13346cbc5bd\"\n}; // Initialize Firebase\n\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\nfunction calculoDeEdad(BirthDate) {\n  let hoy = new Date();\n  console.log(hoy);\n  let cumpleanios = new Date(BirthDate);\n  console.log(BirthDate);\n  let edad = hoy.getFullYear() - cumpleanios.getFullYear();\n  let m = hoy.getMonth() - cumpleanios.getMonth();\n\n  if (m < 0 || m == 0 && hoy.getDate() < cumpleanios.getDate()) {\n    //aca no seria m==0 en vez de m===0 ???\n    edad--;\n  }\n\n  console.log(edad);\n  return edad;\n}\n\nfunction calculoGripe(vaccinationDateFlu) {\n  //esta funcion es igual a la de calculo de edad pero weno\n  let hoy = new Date();\n  let ultimaVacGripe = new Date(vaccinationDateFlu);\n  let años = hoy.getFullYear() - ultimaVacGripe.getFullYear();\n  let m = hoy.getMonth() - ultimaVacGripe.getMonth();\n\n  if (m < 0 || m == 0 && hoy.getDate() < ultimaVacGripe.getDate()) {\n    //aca no seria m==0 en vez de m===0 ???\n    años--;\n  }\n\n  return años;\n}\n\nexport const createUserDocument = async user => {\n  if (!user) return; //esto por si meten huevadas, igual no se si funciona, no lo probe\n  //crear referencia al documento (uso email para identificar a los panas)\n\n  const userRef = doc(db, `Persona/${user.email}`);\n  let hoy = new Date(); //si mas adelante quiero guardar fechas, crear otro hoy, antes de las operaciones de gripe pero despues de covid\n  //VACUNA COVID \n\n  if (calculoDeEdad(user.birthDate) > 60) {\n    if (user.doseAmountCovid < 2) {\n      //AUTOMATICO, DE RIESGO = MAYOR DE 60, CON MENOS DE 2 DOSIS, LE ASIGNO EN 3 DIAS\n      hoy.setDate(hoy.getDate() + 3);\n      user.turnCovid = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 12:00 horas, en el vacunatorio ${user.zone}`;\n    }\n  } else {\n    if (user.riskFactor == \"true\") {\n      if (user.doseAmountCovid < 2) {\n        hoy.setDate(hoy.getDate() + 4); //AUTOMATICO, DE RIESGO = MENOR DE 60, PERO CON FACTORES DE RIESGO Y MENOS DE 2 DOSIS, LE ASIGNO EN 4 DIAS\n\n        user.turnCovid = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 12:30 horas, en el vacunatorio ${user.zone}`;\n      }\n    } else {\n      if (user.doseAmountCovid < 2) {\n        //MANUAL, NO ES DE RIESGO = MENOR DE 60, MENOS DE 2 DOSIS\n        user.turnCovid = \"Se le notifico a los administradores su solicitud de turno para la vacuna del COVID-19\";\n      }\n    }\n  } //VACUNA GRIPE\n\n\n  if (calculoDeEdad(user.birthDate) > 60) {\n    if (user.hasVaccineFlu == \"false\") {\n      // +60 AÑOS, SIN VACUNA\n      hoy.setDate(hoy.getDate() - 1); //ESTO LO HICE PARA QUE NO QUEDE MISMO DIA QUE COVID\n\n      hoy.setMonth(hoy.getMonth() + 2); //+1 MES, PUSE 2 PORQUE EL GETMONTH TOMA ENERO COMO 0, ENTONCES MAYO POR EJEMPLO ES EL MES 4 EN VEZ DE 5\n\n      user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 14:00 horas, en el vacunatorio ${user.zone}`; //LE DOY TURNO PARA 1 MES, EN VACUNATORIO DE PREFERENCIA \n    } else {\n      if (calculoGripe(user.vaccinationDateFlu)) {\n        //+60 AÑOS, CON VACUNA VENCIDA\n        hoy.setDate(hoy.getDate() - 2);\n        hoy.setMonth(hoy.getMonth() + 2); //+1 MES\n\n        user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 14:30 horas, en el vacunatorio ${user.zone}`;\n      }\n    }\n  } else {\n    if (user.hasVaccineFlu == \"false\") {\n      //-60 AÑOS, SIN VACUNA\n      hoy.setDate(hoy.getDate() - 3);\n      hoy.setMonth(hoy.getMonth() + 6); //+5 MESES\n\n      user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 13:00 horas, en el vacunatorio ${user.zone}`; //LE DOY TURNO PARA 5 MESES, EN VACUNATORIO DE PREFERENCIA. \n    } else {\n      if (calculoGripe(user.vaccinationDateFlu)) {\n        //-60 AÑOS, CON VACUNA VENCIDA\n        hoy.setDate(hoy.getDate() - 4);\n        hoy.setMonth(hoy.getMonth() + 6); //+5 MESES\n\n        user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 13:30 horas, en el vacunatorio ${user.zone}`;\n      }\n    }\n  } // SI ALGUN DIA SE QUIERE HACER MAS \"PRO\" EL TEMA DE TURNOS, UNA BUENA IDEA PODRÍA SER TENER UN CALENDARIO, CON UN LIMITE DE TURNOS POR DIA, Y TENER CADA 30 MINUTOS (PONELE) UN TURNO\n  // crea el documento del user que se esta registrando\n\n\n  await setDoc(userRef, {\n    user\n  });\n}; //MATI ESTUVO POR ACÁ","map":{"version":3,"names":["initializeApp","getAuth","getFirestore","doc","setDoc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","calculoDeEdad","BirthDate","hoy","Date","console","log","cumpleanios","edad","getFullYear","m","getMonth","getDate","calculoGripe","vaccinationDateFlu","ultimaVacGripe","años","createUserDocument","user","userRef","email","birthDate","doseAmountCovid","setDate","turnCovid","zone","riskFactor","hasVaccineFlu","setMonth","turnFlu"],"sources":["C:/Users/leand/Desktop/Proyectos/Vacunassist/src/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport {getAuth} from 'firebase/auth';\nimport { getFirestore, doc, setDoc } from '@firebase/firestore'\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBHFWuuXgq4KZFuuYkMDjszxzLPk7Oc6tk\",\n  authDomain: \"vacunassist-97fc7.firebaseapp.com\",\n  projectId: \"vacunassist-97fc7\",\n  storageBucket: \"vacunassist-97fc7.appspot.com\",\n  messagingSenderId: \"1085275692040\",\n  appId: \"1:1085275692040:web:5dcd7341d8f13346cbc5bd\"\n};\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app)\nexport const db= getFirestore(app)\n\nfunction calculoDeEdad(BirthDate) {\n  let hoy = new Date();\n  console.log(hoy)\n  let cumpleanios = new Date(BirthDate);\n  console.log(BirthDate)\n  let edad = hoy.getFullYear() - cumpleanios.getFullYear();\n  let m = hoy.getMonth() - cumpleanios.getMonth();\n  if (m < 0 || (m == 0 && hoy.getDate() < cumpleanios.getDate())) { //aca no seria m==0 en vez de m===0 ???\n      edad--;\n  }\n  console.log(edad);\n  return edad;\n}\nfunction calculoGripe(vaccinationDateFlu){ //esta funcion es igual a la de calculo de edad pero weno\n  let hoy = new Date()\n  let ultimaVacGripe = new Date(vaccinationDateFlu)\n  let años= hoy.getFullYear() - ultimaVacGripe.getFullYear();\n  let m = hoy.getMonth() - ultimaVacGripe.getMonth();\n  if (m < 0 || (m == 0 && hoy.getDate() < ultimaVacGripe.getDate())) { //aca no seria m==0 en vez de m===0 ???\n      años--;\n  }\n  return años;\n}\n\n\nexport const createUserDocument = async (user) =>{\n  if(!user) return; //esto por si meten huevadas, igual no se si funciona, no lo probe\n  //crear referencia al documento (uso email para identificar a los panas)\n  const userRef = doc(db,`Persona/${user.email}`)\n  let hoy = new Date(); //si mas adelante quiero guardar fechas, crear otro hoy, antes de las operaciones de gripe pero despues de covid\n  //VACUNA COVID \n  if((calculoDeEdad(user.birthDate) > 60)){ \n    if((user.doseAmountCovid < 2)){ \n       //AUTOMATICO, DE RIESGO = MAYOR DE 60, CON MENOS DE 2 DOSIS, LE ASIGNO EN 3 DIAS\n      hoy.setDate(hoy.getDate() + 3) \n      user.turnCovid = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 12:00 horas, en el vacunatorio ${user.zone}`\n    } \n  }else{ \n    if(user.riskFactor == \"true\"){\n      if(user.doseAmountCovid < 2){\n        hoy.setDate(hoy.getDate() + 4)\n        //AUTOMATICO, DE RIESGO = MENOR DE 60, PERO CON FACTORES DE RIESGO Y MENOS DE 2 DOSIS, LE ASIGNO EN 4 DIAS\n        user.turnCovid = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 12:30 horas, en el vacunatorio ${user.zone}`\n      }  \n    }else{\n      if(user.doseAmountCovid < 2){\n        //MANUAL, NO ES DE RIESGO = MENOR DE 60, MENOS DE 2 DOSIS\n        user.turnCovid = \"Se le notifico a los administradores su solicitud de turno para la vacuna del COVID-19\"\n      }\n    }\n  }   \n  //VACUNA GRIPE\n  if((calculoDeEdad(user.birthDate) > 60)){\n    if(user.hasVaccineFlu == \"false\"){ // +60 AÑOS, SIN VACUNA\n      hoy.setDate(hoy.getDate() - 1) //ESTO LO HICE PARA QUE NO QUEDE MISMO DIA QUE COVID\n      hoy.setMonth(hoy.getMonth() + 2) //+1 MES, PUSE 2 PORQUE EL GETMONTH TOMA ENERO COMO 0, ENTONCES MAYO POR EJEMPLO ES EL MES 4 EN VEZ DE 5\n      user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 14:00 horas, en el vacunatorio ${user.zone}`\n      //LE DOY TURNO PARA 1 MES, EN VACUNATORIO DE PREFERENCIA \n    }else{\n      if(calculoGripe(user.vaccinationDateFlu)){ //+60 AÑOS, CON VACUNA VENCIDA\n        hoy.setDate(hoy.getDate() - 2)\n        hoy.setMonth(hoy.getMonth() + 2) //+1 MES\n        user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 14:30 horas, en el vacunatorio ${user.zone}`\n      }\n    }\n  }else{ \n    if(user.hasVaccineFlu == \"false\"){ //-60 AÑOS, SIN VACUNA\n      hoy.setDate(hoy.getDate() - 3)\n      hoy.setMonth(hoy.getMonth() + 6) //+5 MESES\n      user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 13:00 horas, en el vacunatorio ${user.zone}`\n      //LE DOY TURNO PARA 5 MESES, EN VACUNATORIO DE PREFERENCIA. \n    }else{\n      if(calculoGripe(user.vaccinationDateFlu)){ //-60 AÑOS, CON VACUNA VENCIDA\n        hoy.setDate(hoy.getDate() - 4)\n        hoy.setMonth(hoy.getMonth() + 6) //+5 MESES\n        user.turnFlu = `Tiene turno el día ${hoy.getDate()}/${hoy.getMonth()}/${hoy.getFullYear()} a las 13:30 horas, en el vacunatorio ${user.zone}`\n      }\n    }\n  }\n  // SI ALGUN DIA SE QUIERE HACER MAS \"PRO\" EL TEMA DE TURNOS, UNA BUENA IDEA PODRÍA SER TENER UN CALENDARIO, CON UN LIMITE DE TURNOS POR DIA, Y TENER CADA 30 MINUTOS (PONELE) UN TURNO\n   // crea el documento del user que se esta registrando\n  await setDoc(userRef, {user});\n} //MATI ESTUVO POR ACÁ"],"mappings":"AAAA;AACA,SAASA,aAAT,QAA8B,cAA9B;AACA,SAAQC,OAAR,QAAsB,eAAtB;AACA,SAASC,YAAT,EAAuBC,GAAvB,EAA4BC,MAA5B,QAA0C,qBAA1C,C,CACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAE,yCADa;EAErBC,UAAU,EAAE,mCAFS;EAGrBC,SAAS,EAAE,mBAHU;EAIrBC,aAAa,EAAE,+BAJM;EAKrBC,iBAAiB,EAAE,eALE;EAMrBC,KAAK,EAAE;AANc,CAAvB,C,CAQA;;AACA,OAAO,MAAMC,GAAG,GAAGZ,aAAa,CAACK,cAAD,CAAzB;AACP,OAAO,MAAMQ,IAAI,GAAGZ,OAAO,CAACW,GAAD,CAApB;AACP,OAAO,MAAME,EAAE,GAAEZ,YAAY,CAACU,GAAD,CAAtB;;AAEP,SAASG,aAAT,CAAuBC,SAAvB,EAAkC;EAChC,IAAIC,GAAG,GAAG,IAAIC,IAAJ,EAAV;EACAC,OAAO,CAACC,GAAR,CAAYH,GAAZ;EACA,IAAII,WAAW,GAAG,IAAIH,IAAJ,CAASF,SAAT,CAAlB;EACAG,OAAO,CAACC,GAAR,CAAYJ,SAAZ;EACA,IAAIM,IAAI,GAAGL,GAAG,CAACM,WAAJ,KAAoBF,WAAW,CAACE,WAAZ,EAA/B;EACA,IAAIC,CAAC,GAAGP,GAAG,CAACQ,QAAJ,KAAiBJ,WAAW,CAACI,QAAZ,EAAzB;;EACA,IAAID,CAAC,GAAG,CAAJ,IAAUA,CAAC,IAAI,CAAL,IAAUP,GAAG,CAACS,OAAJ,KAAgBL,WAAW,CAACK,OAAZ,EAAxC,EAAgE;IAAE;IAC9DJ,IAAI;EACP;;EACDH,OAAO,CAACC,GAAR,CAAYE,IAAZ;EACA,OAAOA,IAAP;AACD;;AACD,SAASK,YAAT,CAAsBC,kBAAtB,EAAyC;EAAE;EACzC,IAAIX,GAAG,GAAG,IAAIC,IAAJ,EAAV;EACA,IAAIW,cAAc,GAAG,IAAIX,IAAJ,CAASU,kBAAT,CAArB;EACA,IAAIE,IAAI,GAAEb,GAAG,CAACM,WAAJ,KAAoBM,cAAc,CAACN,WAAf,EAA9B;EACA,IAAIC,CAAC,GAAGP,GAAG,CAACQ,QAAJ,KAAiBI,cAAc,CAACJ,QAAf,EAAzB;;EACA,IAAID,CAAC,GAAG,CAAJ,IAAUA,CAAC,IAAI,CAAL,IAAUP,GAAG,CAACS,OAAJ,KAAgBG,cAAc,CAACH,OAAf,EAAxC,EAAmE;IAAE;IACjEI,IAAI;EACP;;EACD,OAAOA,IAAP;AACD;;AAGD,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,IAAP,IAAe;EAC/C,IAAG,CAACA,IAAJ,EAAU,OADqC,CAC7B;EAClB;;EACA,MAAMC,OAAO,GAAG9B,GAAG,CAACW,EAAD,EAAK,WAAUkB,IAAI,CAACE,KAAM,EAA1B,CAAnB;EACA,IAAIjB,GAAG,GAAG,IAAIC,IAAJ,EAAV,CAJ+C,CAIzB;EACtB;;EACA,IAAIH,aAAa,CAACiB,IAAI,CAACG,SAAN,CAAb,GAAgC,EAApC,EAAwC;IACtC,IAAIH,IAAI,CAACI,eAAL,GAAuB,CAA3B,EAA8B;MAC3B;MACDnB,GAAG,CAACoB,OAAJ,CAAYpB,GAAG,CAACS,OAAJ,KAAgB,CAA5B;MACAM,IAAI,CAACM,SAAL,GAAkB,sBAAqBrB,GAAG,CAACS,OAAJ,EAAc,IAAGT,GAAG,CAACQ,QAAJ,EAAe,IAAGR,GAAG,CAACM,WAAJ,EAAkB,yCAAwCS,IAAI,CAACO,IAAK,EAA9I;IACD;EACF,CAND,MAMK;IACH,IAAGP,IAAI,CAACQ,UAAL,IAAmB,MAAtB,EAA6B;MAC3B,IAAGR,IAAI,CAACI,eAAL,GAAuB,CAA1B,EAA4B;QAC1BnB,GAAG,CAACoB,OAAJ,CAAYpB,GAAG,CAACS,OAAJ,KAAgB,CAA5B,EAD0B,CAE1B;;QACAM,IAAI,CAACM,SAAL,GAAkB,sBAAqBrB,GAAG,CAACS,OAAJ,EAAc,IAAGT,GAAG,CAACQ,QAAJ,EAAe,IAAGR,GAAG,CAACM,WAAJ,EAAkB,yCAAwCS,IAAI,CAACO,IAAK,EAA9I;MACD;IACF,CAND,MAMK;MACH,IAAGP,IAAI,CAACI,eAAL,GAAuB,CAA1B,EAA4B;QAC1B;QACAJ,IAAI,CAACM,SAAL,GAAiB,wFAAjB;MACD;IACF;EACF,CAzB8C,CA0B/C;;;EACA,IAAIvB,aAAa,CAACiB,IAAI,CAACG,SAAN,CAAb,GAAgC,EAApC,EAAwC;IACtC,IAAGH,IAAI,CAACS,aAAL,IAAsB,OAAzB,EAAiC;MAAE;MACjCxB,GAAG,CAACoB,OAAJ,CAAYpB,GAAG,CAACS,OAAJ,KAAgB,CAA5B,EAD+B,CACA;;MAC/BT,GAAG,CAACyB,QAAJ,CAAazB,GAAG,CAACQ,QAAJ,KAAiB,CAA9B,EAF+B,CAEE;;MACjCO,IAAI,CAACW,OAAL,GAAgB,sBAAqB1B,GAAG,CAACS,OAAJ,EAAc,IAAGT,GAAG,CAACQ,QAAJ,EAAe,IAAGR,GAAG,CAACM,WAAJ,EAAkB,yCAAwCS,IAAI,CAACO,IAAK,EAA5I,CAH+B,CAI/B;IACD,CALD,MAKK;MACH,IAAGZ,YAAY,CAACK,IAAI,CAACJ,kBAAN,CAAf,EAAyC;QAAE;QACzCX,GAAG,CAACoB,OAAJ,CAAYpB,GAAG,CAACS,OAAJ,KAAgB,CAA5B;QACAT,GAAG,CAACyB,QAAJ,CAAazB,GAAG,CAACQ,QAAJ,KAAiB,CAA9B,EAFuC,CAEN;;QACjCO,IAAI,CAACW,OAAL,GAAgB,sBAAqB1B,GAAG,CAACS,OAAJ,EAAc,IAAGT,GAAG,CAACQ,QAAJ,EAAe,IAAGR,GAAG,CAACM,WAAJ,EAAkB,yCAAwCS,IAAI,CAACO,IAAK,EAA5I;MACD;IACF;EACF,CAbD,MAaK;IACH,IAAGP,IAAI,CAACS,aAAL,IAAsB,OAAzB,EAAiC;MAAE;MACjCxB,GAAG,CAACoB,OAAJ,CAAYpB,GAAG,CAACS,OAAJ,KAAgB,CAA5B;MACAT,GAAG,CAACyB,QAAJ,CAAazB,GAAG,CAACQ,QAAJ,KAAiB,CAA9B,EAF+B,CAEE;;MACjCO,IAAI,CAACW,OAAL,GAAgB,sBAAqB1B,GAAG,CAACS,OAAJ,EAAc,IAAGT,GAAG,CAACQ,QAAJ,EAAe,IAAGR,GAAG,CAACM,WAAJ,EAAkB,yCAAwCS,IAAI,CAACO,IAAK,EAA5I,CAH+B,CAI/B;IACD,CALD,MAKK;MACH,IAAGZ,YAAY,CAACK,IAAI,CAACJ,kBAAN,CAAf,EAAyC;QAAE;QACzCX,GAAG,CAACoB,OAAJ,CAAYpB,GAAG,CAACS,OAAJ,KAAgB,CAA5B;QACAT,GAAG,CAACyB,QAAJ,CAAazB,GAAG,CAACQ,QAAJ,KAAiB,CAA9B,EAFuC,CAEN;;QACjCO,IAAI,CAACW,OAAL,GAAgB,sBAAqB1B,GAAG,CAACS,OAAJ,EAAc,IAAGT,GAAG,CAACQ,QAAJ,EAAe,IAAGR,GAAG,CAACM,WAAJ,EAAkB,yCAAwCS,IAAI,CAACO,IAAK,EAA5I;MACD;IACF;EACF,CArD8C,CAsD/C;EACC;;;EACD,MAAMnC,MAAM,CAAC6B,OAAD,EAAU;IAACD;EAAD,CAAV,CAAZ;AACD,CAzDM,C,CAyDL"},"metadata":{},"sourceType":"module"}